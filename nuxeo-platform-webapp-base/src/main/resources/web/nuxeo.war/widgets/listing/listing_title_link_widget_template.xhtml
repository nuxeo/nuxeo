<f:subview id="#{widget.id}"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxp="http://nuxeo.org/nxweb/pdf">
<c:if test="#{nxl:isLikePlainMode(widget.mode)}">#{nxd:titleOrId(field_0)}</c:if>
<c:if test="#{nxl:isLikeViewMode(widget.mode)}">

  <div class="popupTarget" docRef="#{field_1}">

    <nxd:restDocumentLink document="#{field_0}"
      tab="#{widgetProperty_tab}">
      <span id="title_#{field_1}" title="#{field_2}">
        #{nxd:titleOrId(field_0)}
      </span>
    </nxd:restDocumentLink>

    <nxd:restDocumentLink document="#{field_0}"
      newConversation="true" target="_blank"
      tab="#{widgetProperty_tab}">
      <nxu:graphicImage value="/icons/external.gif"
        style="vertical-align:middle"
        alt="#{messages['permalink.newTab']}"
        title="#{messages['permalink.newTab']}" />
    </nxd:restDocumentLink>

    <nxh:outputLink
      rendered="#{field_0.hasSchema(widget.properties.file_schema) and !empty field_3}"
      value="#{nxd:fileUrl('downloadFile', field_0, widget.properties.file_property_name, field_4)}">
      <nxh:graphicImage value="/icons/download.png" style="vertical-align:middle"
        title="#{nxd:fileDescription(field_0, widget.properties.file_property_name, widget.properties.filename_property_name, field_4)}"
        alt="#{nxd:fileDescription(field_0, widget.properties.file_property_name, widget.properties.filename_property_name, field_4)}" />
    </nxh:outputLink>

  </div>

</c:if>
<c:if test="#{widget.mode == 'pdf'}">
  <nxp:html>#{nxd:titleOrId(field_0)}</nxp:html>
</c:if>
</f:subview>