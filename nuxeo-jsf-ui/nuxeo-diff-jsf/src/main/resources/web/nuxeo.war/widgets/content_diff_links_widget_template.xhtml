<f:subview xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  id="#{widget.id}">
<c:if test="#{nxl:isLikePlainMode(widget.mode) or nxl:isLikeViewMode(widget.mode)}">
  <c:if test="#{not empty field_0}">
    <c:choose>
      <c:when test="#{diffActions.isDifferentFilename(field_1)}">
        <h:outputText value="#{messages[diffActions.getContentDiffDifferenceTypeMsgKey(field_1)]}" />
      </c:when>
      <c:otherwise>
        <nxu:set var="xPathForUrlParam" value="#{fn:replace(field_0, '/', '--')}" cache="true">
        <nxu:set var="fieldNameForJsfId" value="#{fn:replace(xPathForUrlParam, ':', '_')}" cache="true">
        <nxu:set var="mainContentDiffLinkTitle" value="#{field_3 ? 'diff.content.keepLayout.link.title' : 'diff.content.link.title'}" cache="true">
          <c:if test="#{field_2}">
            <span class="contentDiffLink">
              <h:outputLink id="openContentDiffFancyBox_#{fieldNameForJsfId}_office2html"
                value="javascript:openFancyBox('#{diffActions.getContentDiffFancyBoxURL(widget.label, xPathForUrlParam)}', { width: '90%', height: '90%', scrolling: 'no' });"
                title="#{messages[mainContentDiffLinkTitle]}">
                <nxu:graphicImage value="/icons/action_diff.png" />
              </h:outputLink>
            </span>
          </c:if>
          <c:if test="#{field_3}">
            <span class="contentDiffLink">
              <h:outputLink id="openContentDiffFancyBox_#{fieldNameForJsfId}_any2text"
                value="javascript:openFancyBox('#{diffActions.getContentDiffFancyBoxURL(widget.label, xPathForUrlParam, 'text')}', { width: '90%', height: '90%', scrolling: 'no' });"
                title="#{messages['diff.content.noLayout.link.title']}">
                <nxu:graphicImage value="/icons/action_diff_formatted.png" />
              </h:outputLink>
            </span>
          </c:if>
        </nxu:set>
        </nxu:set>
        </nxu:set>
      </c:otherwise>
    </c:choose>
  </c:if>
</c:if>
</f:subview>
