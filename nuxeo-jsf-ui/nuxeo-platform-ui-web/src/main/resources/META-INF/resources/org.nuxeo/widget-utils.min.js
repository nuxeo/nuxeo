var nuxeo=nuxeo||{};nuxeo.utils=function(e){function n(e){for(var n in r)r.hasOwnProperty(n)&&r[n].call(null,e)}function t(e,t){n({status:"begin",flag:t}),e(),n({status:"success",flag:t})}function i(e){jQuery(e).find("textarea.mceEditor").each(function(){resetTinyMCE(this.id)})}var r=[],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return e.escapeHTML=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return s[e]})},e.addOnEvent=function(e){if("function"!=typeof e)throw new Error("nuxeo.utils.addOnEvent: Added a callback that was not a function");r[r.length]=e},e.moreLessTableRows=function(e,n,t){var i=jQuery("[id$='"+e+"']"),r=jQuery("[id$='"+e+"'] tr"),s=i.parent().find(".nx-more"),o=i.parent().find(".nx-less");if(r.length<=t)return s.css("display","none"),void o.css("display","none");var u=i.find("tr:gt("+(t-1)+")");n?(s.css("display","none"),o.css("display",""),u.css("display","")):(o.css("display","none"),s.css("display",""),u.css("display","none"))},e.select2ifySelect=function(e,n){jQuery(document.getElementById(e)).select2(n)},e.addFromListTemplate=function(e,n){return t(function(){var t=jQuery(n),r=n.siblings(".listItem").length,s=jQuery("<div/>").html(t.html()).text().trim(),o=new RegExp(e+":TEMPLATE_INDEX_MARKER:rowIndex","g");s=s.replace(o,e+":rowIndex"),o=new RegExp(e+":TEMPLATE_INDEX_MARKER","g"),s=s.replace(o,e+":"+r);var u=jQuery.parseHTML(s,document,!0);jQuery(u).find("input[value='TEMPLATE_INDEX_MARKER']").val(r),t.before(u),i(u)},"js-list-add"),!1},e.deleteFromList=function(e){return t(function(){e.remove()},"js-list-delete"),!1},e.moveUpList=function(e){return t(function(){e.insertBefore(e.prev()),i(e)},"js-list-move-up"),!1},e.moveDownList=function(e){return t(function(){e.insertAfter(e.next()),i(e)},"js-list-move-down"),!1},e}(nuxeo.utils||{});