<html>
<!-- This file is used as a template when dynamically displaying the diff.
  Values to be replaced are hard coded in ImageMagickContentDiffer.java
  and are surrounded by {{ and }} this file: {{THE_VALUE}} (a-la mustache) -->
<head>
<!-- With nuxeo-content-diff, we are in an iFrame: jQuery must be explicitly loaded -->
<script src="{{CONTEXT_PATH}}/nuxeo-diff-pictures/jquery-2.1.4.min.js"></script>

<link rel="stylesheet"
  href="{{CONTEXT_PATH}}/nuxeo-diff-pictures/semantic-ui/semantic.min.css" />
<script
  src="{{CONTEXT_PATH}}/nuxeo-diff-pictures/semantic-ui/semantic.min.js"></script>

<link rel="stylesheet"
  href="{{CONTEXT_PATH}}/nuxeo-diff-pictures/nuxeo-diff-pictures.css" />
<script
  src="{{CONTEXT_PATH}}/nuxeo-diff-pictures/nuxeo-diff-pictures.js"></script>
</head>

<body>

  <div class="ui grid">
    <div class="height wide column nxdiff_imageContainer">
      <div class="">
        <h4 class="ui header nxdiff_imageLabel">{{LEFT_DOC_LABEL}}</h4>
        <img
          src="{{CONTEXT_PATH}}/nxpicsfile/default/{{LEFT_DOC_ID}}/Medium:content/{{TIME_STAMP}}"
          alt="Failed to get the Left Image" class="ui centered medium image" />
      </div>
    </div>
    <div class="height wide column nxdiff_imageContainer">
      <div class="">
        <h4 class="ui header nxdiff_imageLabel">{{RIGHT_DOC_LABEL}}</h4>
        <img
          src="{{CONTEXT_PATH}}/nxpicsfile/default/{{RIGHT_DOC_ID}}/Medium:content/{{TIME_STAMP}}"
          alt="Failed to get the Right Image"
          class="ui centered medium image" />
      </div>
    </div>
  </div>

  <div class="ui segment">
    <h4 class="ui header nxdiff_imageLabel">Differences</h4>
    <div class="ui grid">
      <div id="diffToolsContainer" class="four wide column nxdiff_imageContainer"
        style="padding-left: 35px; {{HIDE_TOOLS_INLINE_CSS}}">
        <div class="ui center aligned segment">
          <!--
              <select name="resultSize" onchange="NxDiffPictures.changeResultSize(this);">
                <option value="display size" selected="selected">Display size:</option>
                <option value="medium">Small</option>
                <option value="large">Default</option>
                <option value="huge">Large</option>
              </select>
              -->
          <div id=diffTools class="ui basic segment">
            <div class="ui label">
              Fuzz <span id="fuzzLabel">(0)</span>
            </div>
            <input id="fuzzSlider" type="range" min="0" max="100" value="0"
              oninput="updateFuzzLabel()"
              style="width: 100%; margin: 1em 0 1em 0" />
            <div class="ui label">
              Highlight Color&nbsp;&nbsp;&nbsp;
              <div id="highlightColor_dropdown"
                class="ui top pointing dropdown">
                <i class="chevron circle down icon"></i>
                <div class="menu">
                  <div class="item">Default</div>
                  <div class="divider"></div>
                  <div class="item">Red</div>
                  <div class="item">Green</div>
                  <div class="item">Blue</div>
                  <div class="item">White</div>
                  <div class="item">Black</div>
                  <div class="divider"></div>
                  <div class="item">FireBrick</div>
                  <div class="item">SeaGreen</div>
                  <div class="item">SteelBlue</div>
                </div>
              </div>
            </div>
            <div class="ui input">
              <input id="highlightColor" type="text" class="nxdiff_field" />
            </div>
            <div class="ui label">
              Lowlight Color&nbsp;&nbsp;&nbsp;
              <div id="lowlightColor_dropdown"
                class="ui top pointing dropdown">
                <i class="chevron circle down icon"></i>
                <div class="menu">
                  <div class="item">Default</div>
                  <div class="divider"></div>
                  <div class="item">Red</div>
                  <div class="item">Green</div>
                  <div class="item">Blue</div>
                  <div class="item">White</div>
                  <div class="item">Black</div>
                  <div class="divider"></div>
                  <div class="item">LightCoral</div>
                  <div class="item">PaleGreen</div>
                  <div class="item">SkyBlue</div>
                </div>
              </div>
            </div>
            <div class="ui input">
              <input id="lowlightColor" type="text" class="nxdiff_field" />
            </div>
            <div class="ui divider"></div>
            <div class="ui blue button" onclick="updateResultImage()">Submit</div>
          </div>
        </div>
      </div>
      <div id="resultImgContainer" class="{{IMG_RESULT_NB_COLUMNS}} wide column nxdiff_imageContainer"
        style="padding-right: 35px; {{IMG_RESULT_INLINE_CSS}}">
        <div class="ui segment">
          <img id="diff-pict-resultImg" src="" alt=""
            class="ui centered large image nxdiff_resultImage" />
        </div>
      </div>
    </div>
  </div>

  <script>
      var params = {
      contextPath: "{{CONTEXT_PATH}}",
        leftDocId: "{{LEFT_DOC_ID}}",
        rightDocId: "{{RIGHT_DOC_ID}}",
        resultImgId: "diff-pict-resultImg",
        fuzz: 0,
        highlightColor: "Default",
        lowlightColor: "Default",
        xpath: "{{XPATH}}",
        hideTuning: {{HIDE_TUNING}},
        forcedCommand: "{{FORCED_COMMAND}}"
      }
      NxDiffPictures.init(params);
    </script>

  <!--
  <div id="diff-pict">
    <img
      src="{{CONTEXT_PATH}}/diffPictures?action={{ACTION}}&leftDocId={{LEFT_DOC_ID}}&rightDocId={{RIGHT_DOC_ID}}&xpath={{XPATH}}"></img>
  </div>
  -->

</body>
</html>