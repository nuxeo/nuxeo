<f:subview
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  id="#{layout.id}">

  <c:if test="false">
    Overrides default summary template to generate styling according
    to Studio grid table
  </c:if>
  <nxu:set var="layoutStyleClass"
    value="#{layout.properties.styleClass}"
    resolveTwice="true">

    <div class="gridContainer studioGridContainer #{layoutStyleClass}">
      <nxl:layoutRow>
        <div class="gridRow">
          <nxl:layoutRowWidget>
            <c:set var="gridStyleClassProp" value="nxl_gridStyleClass_#{widgetIndex}" />
            <div class="gridBox #{nxu:test(empty layoutRow.properties[gridStyleClassProp], widgetControl_gridStyleClass, layoutRow.properties[gridStyleClassProp])}">
              <c:if test="#{widget != null}">
                <ui:decorate template="/widgets/incl/form_template.xhtml">
                  <ui:param name="addForm" value="#{widgetControl_requireSurroundingForm}" />
                  <ui:param name="formId" value="#{widget.id}_form" />
                  <ui:param name="useAjaxForm" value="#{widgetControl_useAjaxForm}" />
                  <ui:param name="eventsQueueId" value="#{layout.id}_queue" />
                  <ui:define name="form_template_content">
                    <nxl:widget widget="#{widget}" value="#{value}" />
                  </ui:define>
                </ui:decorate>
              </c:if>
            </div>
          </nxl:layoutRowWidget>
          <div class="clear" />
        </div>
      </nxl:layoutRow>
    </div>

  </nxu:set>

</f:subview>