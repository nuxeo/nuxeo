<?xml version="1.0"?>

<component name="org.nuxeo.ecm.platform.forms.layout.MainContribution">
  <documentation>
    Component that provides main contributions to the web layout manager widget
    types.

    @version 1.0 @author Anahide Tchertchian (at@nuxeo.com)
  </documentation>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgettypes">

    <widgetType name="text">
      <configuration>
        <title>Text</title>
        <description>
          The text widget displays an input text in create or edit mode, with
          additional message tag for errors, and a regular text output in any
          other mode.

          Widgets using this type can provide properties accepted on a
          &lt;h:inputText /&gt; tag in create or edit mode, and properties
          accepted on a &lt;h:outputText /&gt; tag in other modes.
        </description>
        <fields>
          <list>false</list>
          <complex>false</complex>
          <supportedTypes>
            <type>string</type>
          </supportedTypes>
          <defaultTypes>
            <type>string</type>
          </defaultTypes>
        </fields>
        <categories>
          <category>document</category>
        </categories>
        <properties>
          <layouts mode="any">
            <layout name="text_widget_type_properties_any">
              <rows>
                <row>
                  <widget>styleClass</widget>
                </row>
              </rows>
              <widget name="styleClass" type="text">
                <labels>
                  <label mode="any">Style class</label>
                </labels>
                <fields>
                  <field>styleClass</field>
                </fields>
              </widget>
            </layout>
          </layouts>
          <layouts mode="view">
            <layout name="text_widget_type_properties_view">
              <rows>
                <row>
                  <widget>escape</widget>
                </row>
              </rows>
              <widget name="escape" type="checkbox">
                <labels>
                  <label mode="any">Escape</label>
                </labels>
                <helpLabels>
                  <label mode="any">
                    If set to false, the held value will not be escaped. For
                    instance if it contains HTML tags, they will be rendered as
                    part of the rendered HTML page instead of being rendered as
                    text content. Defaults to true.
                  </label>
                </helpLabels>
                <fields>
                  <field>escape</field>
                </fields>
              </widget>
            </layout>
          </layouts>
          <layouts mode="edit">
            <layout name="text_widget_type_properties_edit">
              <rows>
                <row>
                  <widget>required</widget>
                </row>
              </rows>
              <widget name="required" type="checkbox">
                <labels>
                  <label mode="any">Required</label>
                </labels>
                <fields>
                  <field>required</field>
                </fields>
              </widget>
            </layout>
          </layouts>
        </properties>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TextWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="int">
      <configuration>
        <title>Int</title>
        <description>
          The int widget displays an input text in create or edit mode, with
          additional message tag for errors, and a regular text output in any
          other mode. It uses a number converter.

          Widgets using this type can provide properties accepted on a
          &lt;h:inputText /&gt; tag in create or edit mode, and properties
          accepted on a &lt;h:outputText /&gt; tag in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.IntWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="secret">
      <configuration>
        <title>Secret</title>
        <description>
          The secret widget displays an input secret text in create or edit
          mode, with additional message tag for errors, and nothing in any other
          mode.

          Widgets using this type can provide properties accepted on a
          &lt;h:inputSecret /&gt; tag in create or edit mode.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.SecretWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="textarea">
      <configuration>
        <title>Textarea</title>
        <description>
          The textarea widget displays a textarea in create or edit mode, with
          additional message tag for errors, and a regular text output in any
          other mode.

          Widgets using this type can provide properties accepted on a
          &lt;h:inputTextarea /&gt; tag in create or edit mode, and properties
          accepted on a &lt;h:outputText /&gt; tag in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TextareaWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="datetime">
      <configuration>
        <title>Datetime</title>
        <description>
          The datetime widget displays a javascript calendar in create or edit
          mode, with additional message tag for errors, and a regular text
          output in any other mode. It uses a date time converter.

          Widgets using this type can provide properties accepted on a
          &lt;nxu:inputDatetime /&gt; tag in create or edit mode, and properties
          accepted on a &lt;h:outputText /&gt; tag in other modes. The converter
          will also be given these properties.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.DateTimeWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="template">
      <configuration>
        <title>Template</title>
        <description>
          The template widget displays a template content whatever the mode.

          Widgets using this type must provide the path to this template ; this
          template can check the mode to adapt the rendering.

          Note that the same handler class can be used to define a new widget
          type using a designated template, by registering it as is:

          &lt;widgetType name="template"&gt; &lt;handler-class&gt;
          org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
          &lt;/handler-class&gt; &lt;property name="template"&gt;
          /widgets/my_custom_widget_template.xhtml &lt;/property&gt;
          &lt;/widgetType&gt;
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="file">
      <configuration>
        <title>File</title>
        <description>
          The file widget displays a file uploader/editor in create or edit
          mode, with additional message tag for errors, and a link to the file
          in other modes.

          Widgets using this type can provide properties accepted on a
          &lt;nxu:inputFile /&gt; tag in create or edit mode, and properties
          accepted on a &lt;nxu:outputFile /&gt; tag in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.FileWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="htmltext">
      <configuration>
        <title>HTML text</title>
        <description>
          The htmltext widget displays an html text editor in create or edit
          mode, with additional message tag for errors, and a regular text
          output in other modes (without escaping the text).

          Widgets using this type can provide properties accepted on a
          &lt;nxu:editor /&gt; tag in create or edit mode, and properties
          accepted on a &lt;nxu:outputText /&gt; tag in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.HtmlTextWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="selectOneDirectory">
      <configuration>
        <title>Select one directory</title>
        <description>
          The selectOneDirectory widget displays a selection of directory
          entries in create or edit mode, with additional message tag for
          errors, and the directory entry label in other modes.

          Widgets using this type can provide properties accepted on a
          &lt;nxd:selectOneListbox /&gt; tag in create or edit mode, and
          properties accepted on a &lt;nxd:directoryEntryOutput /&gt; tag in
          other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.DirectorySelectOneWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="selectManyDirectory">
      <configuration>
        <title>Select many directory</title>
        <description>
          The selectOneDirectory widget displays a multi selection of directory
          entries in create or edit mode, with additional message tag for
          errors, and the directory entries labels in other modes.

          Widgets using this type can provide properties accepted on a c tag in
          create or edit mode, and properties accepted on a
          &lt;nxd:directoryEntryOutput /&gt; tag in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.DirectorySelectManyWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="list">
      <configuration>
        <title>List</title>
        <description>
          The list widget displays an editable list of items in create or edit
          mode, with additional message tag for errors, and the same list of
          items in other modes.

          Items are defined using sub wigdets configuration.

          This actually a template widget type whose template uses a
          &lt;nxu:inputList /&gt; tag in edit or create mode, and a table
          iterating over items in other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">/widgets/list_widget_template.xhtml</property>
    </widgetType>

    <widgetType name="checkbox">
      <configuration>
        <title>Checkbox</title>
        <description>
          The checkbox widget displays a checkbox in create, edit and any other
          mode, with additional message tag for errors.

          Widgets using this type can provide properties accepted on a
          &lt;h:selectBooleanCheckbox /&gt; tag in create, edit mode, and other
          modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.CheckboxWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="hidden">
      <configuration>
        <title>Hidden</title>
        <description>
          The hidden widget is for a hidden field in create, edit and any other
          mode, with additional message tag for errors.

          Widgets using this type can provide properties accepted on a
          &lt;h:inputHidden /&gt; tag in create, edit mode, and other modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.HiddenWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="layout">
      <configuration>
        <title>Layout</title>
        <description>
          The layout widget renders a layout.

          Widgets using this type can provide properties accepted on a
          &lt;nxl:layout /&gt; tag in all modes.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.LayoutWidgetTypeHandler
      </handler-class>
    </widgetType>

    <widgetType name="richtext_with_mimetype">
      <configuration>
        <title>Richtext</title>
        <description>
          This widget displays an html text editor or a textarea in create or
          edit mode, depending on the mimetype defined.

          Widgets using this type can provide properties accepted on a
          &lt;nxu:editor /&gt; tag in create or edit mode.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/richtext_with_mimetype_widget_template.xhtml
      </property>
    </widgetType>

    <widgetType name="duration">
      <configuration>
        <title>Duration</title>
        <description>
          This widget displays a i18n formatted duration of a field holding a
          value measured in seconds (can be Long, Double or String valued). NB:
          only view mode is supported right now.
        </description>
        <categories>
          <category>document</category>
        </categories>
      </configuration>
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/duration_widget_template.xhtml
      </property>
    </widgetType>

  </extension>

</component>
