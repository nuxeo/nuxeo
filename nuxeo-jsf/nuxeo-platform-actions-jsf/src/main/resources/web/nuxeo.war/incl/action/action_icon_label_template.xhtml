<nxu:set var="actionLabel"
  value="#{messages[action.label]}"
  resolveTwice="true"
  cache="true"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:h="http://java.sun.com/jsf/html">
<nxu:set var="actionIcon" value="#{action.icon}"
  resolveTwice="true" cache="true">
  <c:if test="#{not hideIcon}">
    <nxu:graphicImage value="#{nxu:test(empty actionIcon and hideLabel, '/icons/action_empty.png', actionIcon)}"
      title="#{actionLabel}"
      rendered="#{not empty actionIcon or hideLabel}"
      alt="#{actionLabel}"
      styleClass="smallIcon tipsyShow #{empty tipsyGravity?'tipsyGravitySE':tipsyGravity} #{action.properties.iconStyleClass}" />
  </c:if>
  <c:if test="#{not hideIcon and not hideLabel}">
    <h:outputText value=" " />
  </c:if>
  <c:if test="#{not hideLabel}">
    <h:outputText value="#{actionLabel}"
      styleClass="actionLabel #{action.properties.labelStyleClass}" />
  </c:if>
</nxu:set>
</nxu:set>