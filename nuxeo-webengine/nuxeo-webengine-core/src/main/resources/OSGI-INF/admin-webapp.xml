<?xml version="1.0"?>
<component name="org.nuxeo.ecm.webengine.admin.webapp">

  <documentation>
    @author Bogdan Stefanescu (bs@nuxeo.com)
    Default Objects
  </documentation>

  <extension target="org.nuxeo.ecm.webengine.WebEngineComponent"
    point="application-mapping">
    <mapping path="/admin" webapp="admin">
      <permission expression="user=Administrator" />
    </mapping>
  </extension>


  <extension target="org.nuxeo.ecm.webengine.WebEngineComponent"
    point="application">

    <webapp id="admin" extends="default">
      <roots>
        <root priority="1">admin</root>
      </roots>
      <mappings>
        <mapping pattern="/users">
          <script>/users/users.groovy</script>
        </mapping>
        <mapping pattern="/users/create_user">
          <script>/users/user_form.groovy</script>
        </mapping>
        <mapping pattern="/users/save_user">
          <script>/users/save_user.groovy</script>
        </mapping>
        <mapping pattern="/users/create_group">
          <script>/users/group_form.ftl</script>
        </mapping>
        <mapping pattern="/users/save_group">
          <script>/users/save_group.groovy</script>
        </mapping>
        <mapping pattern="/users/user/(?username:[a-zA-Z0-9]+)$">
          <script>/users/user_form.groovy</script>
        </mapping>
        <mapping pattern="/users/group/(?username:[a-zA-Z0-9]+)$">
          <script>/users/group_form.groovy</script>
        </mapping>
      </mappings>
    </webapp>

  </extension>

</component>
