<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

  <style type="text/css">
    #content-diff-frame {display: block; width: 100%; border: none;}
  </style>
  
  <nxu:set var="propertyLabel" value="#{param['label']}" cache="true">
  <nxu:set var="propertyXPath" value="#{param['xPath']}" cache="true">
  <nxu:set var="conversionType" value="#{param['conversionType']}" cache="true">
  
  <h2>
    <h:outputText value="#{messages[propertyLabel]} " />-<h:outputText value=" #{messages['document.diff.preview.compareTitle']}" />
  </h2>
  
  <iframe src="#{diffActions.getContentDiffURL(propertyXPath, conversionType)}" id="content-diff-frame"
    frameborder="1" width="100%" scrolling="auto">
  </iframe>
  
  </nxu:set>
  </nxu:set>
  </nxu:set>

  <script type="text/javascript">
    jQuery(document).ready(function() {
      var fancyBox = jQuery('#fancybox-content', window.parent.document);
      if (fancyBox.length > 0 &amp;&amp; fancyBox.height() > 0) {
        // we know we are in a fancybox
        jQuery('#content-diff-frame').height(fancyBox.height() - 40);
      }
    });
  </script>

</div>
