<?xml version="1.0" encoding="UTF-8"?>

<process-definition
  xmlns=""  name="document_review_approbation">
  <event type="process-start">
    <script>
      <expression>
        executionContext.setVariable("workflow_review_type", "workflowDocumentReviewTypeSerie");
        System.out.println("Setting workflow review type....");
        executionContext.setVariable("workflowDirectives", new String[] {"workflowDirectiveValidation", "workflowDirectiveVerification"});
        System.out.println("Setting work item directives for this process definition ....");
      </expression>
   </script>
  </event>

   <start-state name="start">
      <transition name="review" to="review">
        <action class="org.nuxeo.ecm.platform.workflow.jbpm.handlers.StartupActionHandler"/>
      </transition>
   </start-state>

   <task-node name="review" create-tasks="false" end-tasks="true" signal="last-wait">
      <event type="node-enter">
        <action
          class="org.nuxeo.ecm.platform.workflow.jbpm.handlers.EnterNodeActionHandler"/>
      </event>
      <task name="review">
        <assignment class="org.nuxeo.ecm.platform.workflow.jbpm.handlers.NuxeoAssignmentHandler"/>
      </task>
      <transition name="validate" to="validated">
        <action class="org.nuxeo.ecm.platform.workflow.jbpm.handlers.ApprobationEndActionHandler"/>
      </transition>
   </task-node>

   <end-state name="validated"/>
</process-definition>
