<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.picture.operation">
  <documentation>
    Define the default operations for the imaging library
  </documentation>

  <extension target="org.nuxeo.ecm.core.operation.OperationServiceComponent" point="operations">

    <operation class="org.nuxeo.ecm.platform.picture.operation.PictureResize" />

    <operation class="org.nuxeo.ecm.platform.picture.operation.CreatePicture" />

    <operation class="org.nuxeo.ecm.platform.picture.operation.GetPictureView" />

    <operation class="org.nuxeo.ecm.platform.picture.operation.RecomputePictureViews" />

  </extension>

  <extension target="org.nuxeo.ecm.automation.server.AutomationServer" point="bindings">

    <binding name="Picture.RecomputeViews">
      <administrator>true</administrator>
    </binding>

  </extension>

  <extension point="chains" target="org.nuxeo.ecm.core.operation.OperationServiceComponent">

    <chain id="Image.Blob.Resize">
      <operation id="Blob.RunConverter">
        <param name="converter" type="string">pictureResize</param>
      </operation>
    </chain>

    <chain id="Image.Blob.ConvertToPDF">
      <operation id="Context.PopBlob" />
      <operation id="Blob.RunConverter">
        <param name="converter" type="string">pictureConvertToPDF</param>
      </operation>
    </chain>

  </extension>
</component>
