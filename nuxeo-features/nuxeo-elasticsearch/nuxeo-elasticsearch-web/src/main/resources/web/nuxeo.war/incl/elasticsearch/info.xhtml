<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core"
  class="hostInfos">

  <script src="#{baseURL}scripts/json2html.js" type='text/javascript'></script>
  <script src="#{baseURL}scripts/jquery.json2html.js" type='text/javascript'></script>
  <script src="#{baseURL}scripts/displayESJSON.js" type='text/javascript'></script>

  <h3> ElasticSearch Cluster Config</h3>
  <div id="ESConfig"></div>

  <h3> ElasticSearch Stats </h3>
  <div id="ESStats"></div>

  <h3> ElasticSearch Health </h3>
  <pre class="bubbleBox">
    <h:outputText value="#{esAdmin.nodesHealth}" />
  </pre>

  <h3> ElasticSearch Pending Tasks </h3>
  <div id="ESTasks"></div>


<a4j:outputPanel ajaxRendered="true">
<script>
function initESInfo() {
  // I know this is bad
  jQuery('head').append('<link rel="stylesheet" type="text/css" href="#{baseURL}css/displayESJSON.css"/>');

  displayESJSON('config', <h:outputText value="#{esAdmin.nodesInfo}" escape="false" />, jQuery('#ESConfig'));
  displayESJSON('stats', <h:outputText value="#{esAdmin.nodesStats}" escape="false" />, jQuery('#ESStats'));
  displayESJSON('tasks', <h:outputText value="#{esAdmin.nodesTasks}" escape="false" />, jQuery('#ESTasks'));
}

initESInfo();</script>
</a4j:outputPanel>
</div>
