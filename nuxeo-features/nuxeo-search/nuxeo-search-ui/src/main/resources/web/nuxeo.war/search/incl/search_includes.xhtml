<c:if test="true"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

  <a4j:outputPanel id="searchPermanentLink_panel" ajaxRendered="true" layout="block">
    <c:if test="#{useHtml5DragAndDrop and searchUIActions.isOnSearchView()}">
      <nxu:set var="searchPermanentLinkUrl" value="#{searchUIActions.searchPermanentLinkUrl}" cache="true" useAlias="true">
        <c:if test="#{not empty searchPermanentLinkUrl}">
          <h:outputScript target="#{pageJsTarget}">
            history.pushState(null, '#{nxu:javaScriptEscape(currentDocument.title)}', '#{nxu:javaScriptEscape(searchPermanentLinkUrl)}');
          </h:outputScript>
        </c:if>
      </nxu:set>
    </c:if>
  </a4j:outputPanel>

</c:if>
